/*
 ******************************************************************************
 *                     INTERPEAK SOURCE FILE
 *
 *   Document no: @(#) $Name: VXWORKS_ITER18A_FRZ10 $ $RCSfile: ipcom_atomic.c,v $ $Revision: 1.3 $
 *   $Source: /home/interpeak/CVSRoot/ipcom/port/vxworks/src/ipcom_atomic.c,v $
 *   $Author: dlkrejsa $
 *   $State: Exp $ $Locker:  $
 *
 * INTERPEAK_COPYRIGHT_STRING
 * Design and implementation by Kenneth Jonsson <kenneth.jonsson@windriver.com>
 ******************************************************************************
 */


/*
 ****************************************************************************
 * 1                    DESCRIPTION
 ****************************************************************************
 */
/*
  Mapping of the IPCOM atomic operation to VxWorks
 */

/*
 ****************************************************************************
 * 2                    CONFIGURATION
 ****************************************************************************
 */

#include "ipcom_config.h"

/*
 ****************************************************************************
 * 3                    INCLUDE FILES
 ****************************************************************************
 */

#include <ipcom_atomic.h>
#include <ipcom_clib.h>
#include <ipcom_cstyle.h>
#include <ipcom_type.h>

#include <vxWorks.h>
#include <vxAtomicLib.h>

/*
 ****************************************************************************
 * 4                    DEFINES
 ****************************************************************************
 */

/*
 ****************************************************************************
 * 5                    TYPES
 ****************************************************************************
 */

/*
 ****************************************************************************
 * 6                    EXTERN PROTOTYPES
 ****************************************************************************
 */

/*
 ****************************************************************************
 * 7                    LOCAL PROTOTYPES
 ****************************************************************************
 */

/*
 ****************************************************************************
 * 8                    DATA
 ****************************************************************************
 */

/*
 ****************************************************************************
 * 9                    STATIC FUNCTIONS
 ****************************************************************************
 */

/*
 ****************************************************************************
 * 10                   GLOBAL FUNCTIONS
 ****************************************************************************
 */

/*
 ****************************************************************************
 * 11                   PUBLIC FUNCTIONS
 ****************************************************************************
 */

/*
 *===========================================================================
 *                    ipcom_atomic_get
 *===========================================================================
 * Description:
 * Parameters:
 * Returns:
 *
 */
IP_PUBLIC int
ipcom_atomic_get(Ipcom_atomic_t *v)
{
    return vxAtomicGet((atomic_t *) v);
}


/*
 *===========================================================================
 *                    ipcom_atomic_set
 *===========================================================================
 * Description:
 * Parameters:
 * Returns:
 *
 */
IP_PUBLIC void
ipcom_atomic_set(Ipcom_atomic_t *v, int i)
{
    (void) vxAtomicSet((atomic_t *) v, i);
}


/*
 *===========================================================================
 *                    ipcom_atomic_add
 *===========================================================================
 * Description:
 * Parameters:
 * Returns:
 *
 */
IP_PUBLIC void
ipcom_atomic_add(Ipcom_atomic_t *v, int i)
{
    (void) vxAtomicAdd((atomic_t *) v, i);
}


/*
 *===========================================================================
 *                    ipcom_atomic_add_and_return
 *===========================================================================
 * Description:
 * Parameters:
 * Returns:
 *
 */
IP_PUBLIC int
ipcom_atomic_add_and_return(Ipcom_atomic_t *v, int i)
{
    return vxAtomicAdd((atomic_t *) v, i) + i;
}


/*
 *===========================================================================
 *                    ipcom_atomic_inc
 *===========================================================================
 * Description:
 * Parameters:
 * Returns:
 *
 */
IP_PUBLIC void ipcom_atomic_inc(Ipcom_atomic_t *v)
{
    (void) vxAtomicInc((atomic_t *) v);
}


/*
 *===========================================================================
 *                    ipcom_atomic_dec
 *===========================================================================
 * Description:
 * Parameters:
 * Returns:
 *
 */
IP_PUBLIC void ipcom_atomic_dec(Ipcom_atomic_t *v)
{
    (void) vxAtomicDec((atomic_t *) v);
}


/*
 *===========================================================================
 *                    ipcom_atomic_sub
 *===========================================================================
 * Description:
 * Parameters:
 * Returns:
 *
 */
IP_PUBLIC void
ipcom_atomic_sub(Ipcom_atomic_t *v, int i)
{
    (void) vxAtomicSub((atomic_t *) v, i);
}


/*
 *===========================================================================
 *                    ipcom_atomic_sub_and_return
 *===========================================================================
 * Description:
 * Parameters:
 * Returns:
 *
 */
IP_PUBLIC int
ipcom_atomic_sub_and_return(Ipcom_atomic_t *v, int i)
{
    return vxAtomicSub((atomic_t *) v, i) - i;
}


/*
 ****************************************************************************
 *                      END OF FILE
 ****************************************************************************
 */

